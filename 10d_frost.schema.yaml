# Rime schema
# encoding: utf-8


# æ–¹æ¡ˆè¯´æ˜
schema:
  schema_id: 10d_frost
  name: åæŒ‡å¹¶å‡»ãƒ»ç™½éœœæ‹¼éŸ³
  version: "2024-06-30"
  author:
    - Dvel
    - Etaoin
  description: |
    ç™½éœœæ‹¼éŸ³ + 10dpy å¹¶å‡»æ–¹æ¡ˆ
  dependencies:
    - rime_frost


# å¼€å…³
# reset: é»˜è®¤çŠ¶æ€ã€‚æ³¨é‡Šæ‰åï¼Œåˆ‡æ¢çª—å£æ—¶ä¸ä¼šé‡ç½®åˆ°é»˜è®¤çŠ¶æ€ã€‚
# states: æ–¹æ¡ˆé€‰å•æ˜¾ç¤ºçš„åç§°ã€‚å¯ä»¥æ³¨é‡Šæ‰ï¼Œä»å¯ä»¥é€šè¿‡å¿«æ·é”®åˆ‡æ¢ã€‚
# abbrev: é»˜è®¤çš„ç¼©å†™å– states çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œabbrev å¯è‡ªå®šä¹‰ä¸€ä¸ªå­—ç¬¦
switches:
  - name: ascii_mode
    states: [ ä¸­, ï¼¡ ]
  - name: ascii_punct  # ä¸­è‹±æ ‡ç‚¹
    states: [ Â¥, $ ]
  - name: traditionalization
    states: [ ç®€, ç¹ ]
  - name: emoji
    states: [ ğŸ’€, ğŸ˜„ ]
    reset: 1
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: aux_code_single_char
    states: [å…¨è¯, å•å­—]
    reset: 1
  - name: aux_code_nonmatch_policy
    reset: 0
    states: ["ç­›é€‰", "ä¼˜å…ˆ"]
  - options: [aux_code_hint_always, aux_code_hint_on_trigger, aux_code_hint_never]
    reset: 1
    states: ["è¾…ç æ˜¾ç¤º", "è¾…ç æŒ‰éœ€", "è¾…ç éšè—"]
    abbrev: ["æ˜¾", "éœ€", "éš"]



# è¾“å…¥å¼•æ“
engine:
  processors:
    - lua_processor@select_character          # ä»¥è¯å®šå­—
    - ascii_composer
    - chord_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - lua_processor@*back_syllable_processor  # é€€æ ¼
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - table_translator@custom_phrase    # è‡ªå®šä¹‰çŸ­è¯­ custom_phrase.txt
    - lua_translator@force_gc           # æš´åŠ› GC
  filters:
    - simplifier@traditionalize                     # ç®€ç¹åˆ‡æ¢
    - uniquifier                                    # å»é‡
    - lua_filter@*aux_code@ZRM_Aux-code_4.3         # è¾…ç 

chord_composer:
  alphabet: ' qwer{F15}{F16}uiopty'
  algebra:
    # å…ˆå°‡ç‰©ç†æŒ‰éµå­—ç¬¦å°æ‡‰åˆ°10dpyéµä½ä¸­çš„æ‹¼éŸ³å­—æ¯
    - xform/{F15}/Y/
    - xform/{F16}/W/
    - 'xlit|qwertyuiop|ZHGDSTAEUN|'

    # åŠŸèƒ½åŒº
    - xform/^ W$/â¬š/
    - xform/^ $/â¬š/
    - xform/^ //
    - xform/^(S|T|ST)$/âŒ«/
    - xform/^ZHGDYW$/å–æ¶ˆ/

    # è¯‘ä¸ºå…¨æ‹¼
    - xform/^(Z?H?G?D?Y?W?A?E?U?N?)$/å…¨$1æ‹¼/
    # âŸ¨erâŸ©è‡ªæˆéŸ³ç¯€
    - xform/^å…¨ZGYWENæ‹¼$/er/
    # å£°æ¯
    - xform/^å…¨ZHGD/å…¨b/
    - xform/^å…¨ZGD/å…¨p/
    - xform/^å…¨ZD/å…¨m/
    - xform/^å…¨ZHD/å…¨f/
    - xform/^å…¨D/å…¨d/
    - xform/^å…¨ZHG/å…¨t/
    - xform/^å…¨ZG/å…¨n/
    - xform/^å…¨HD/å…¨l/
    - xform/^å…¨ZH/å…¨r/
    - xform/^å…¨Z/å…¨zh/
    - xform/^å…¨HGD/å…¨ch/
    - xform/^å…¨GD/å…¨sh/
    - xform/^å…¨G/å…¨g/
    - xform/^å…¨HG/å…¨k/
    - xform/^å…¨H/å…¨h/
    # å£°æ¯ï¼šjqx ç»„
    - xform/^å…¨gY/å…¨jY/
    - xform/^å…¨kY/å…¨qY/
    - xform/^å…¨hY/å…¨xY/
    # å£°æ¯ï¼šå¹³èˆŒéŸ³
    - xform/^å…¨([zcs])hY/å…¨$1/

    # éŸµæ¯
    #   -ng: -UN
    - xform/AUNæ‹¼$/angæ‹¼/
    - xform/AEUNæ‹¼$/ongæ‹¼/
    - xform/YUNæ‹¼$/ingæ‹¼/
    - xform/UNæ‹¼$/engæ‹¼/
    #   -i: -EN
    - xform/AEUæ‹¼$/aiæ‹¼/
    - xform/AENæ‹¼$/aiæ‹¼/
    # - xform/EUNæ‹¼$/eiæ‹¼/
    - xform/Eengæ‹¼$/eiæ‹¼/
    - xform/ENæ‹¼$/eiæ‹¼/
    #   -n: -N
    - xform/ANæ‹¼$/anæ‹¼/
    - xform/YNæ‹¼$/inæ‹¼/
    - xform/YWNæ‹¼$/Ã¼næ‹¼/
    - xform/Næ‹¼$/enæ‹¼/
    #   -o/-u: -U
    - xform/AUæ‹¼$/aoæ‹¼/
    - xform/EUæ‹¼$/ouæ‹¼/
    #   é›¶éŸµå°¾
    - xform/Aæ‹¼$/aæ‹¼/
    - xform/AEæ‹¼$/oæ‹¼/
    - xform/Eæ‹¼$/eæ‹¼/

    #   éŸµè…¹
    - xform/å…¨(.*)YW(.*)æ‹¼/å…¨$1Ã¼$2æ‹¼/
    - xform/å…¨(.*)Y(.*)æ‹¼/å…¨$1i$2æ‹¼/
    - xform/å…¨(.*)W(.*)æ‹¼/å…¨$1u$2æ‹¼/

    # æ‹¼å†™ï¼šé›¶å£°æ¯
    - xform/^å…¨i(ng?)æ‹¼$/å…¨yi$1æ‹¼/
    - xform/^å…¨iæ‹¼$/å…¨yiæ‹¼/
    - xform/^å…¨i/å…¨y/
    - xform/^å…¨uæ‹¼$/å…¨wuæ‹¼/
    - xform/^å…¨u/å…¨w/
    - xform/^å…¨Ã¼æ‹¼$/å…¨yÃ¼æ‹¼/
    - xform/^å…¨Ã¼/å…¨yÃ¼/

    # æ‹¼å†™ï¼š
    - xform/([wu])eæ‹¼$/$1oæ‹¼/
    - xform/ueiæ‹¼$/uiæ‹¼/
    - xform/iouæ‹¼$/iuæ‹¼/
    - xform/uenæ‹¼$/unæ‹¼/
    - xform/^å…¨([jqxy])Ã¼/å…¨$1u/
    - xform/^å…¨(.+)Ã¼/å…¨$1v/

    # é›¶éŸµæ¯é€Ÿç 
    - xform/^å…¨([bpf])æ‹¼$/å…¨$1uæ‹¼/
    - xform/^å…¨([mdtnlgkh])æ‹¼$/å…¨$1eæ‹¼/
    - xform/^å…¨([zcsr]h?)æ‹¼$/å…¨$1iæ‹¼/

    # è¾…ç 
    - xform/^å…¨([bpmfdtnlgkhzcsryw])Uæ‹¼$/è¾…ç $1/
    - xform/^å…¨zhUæ‹¼$/è¾…ç v/
    - xform/^å…¨chUæ‹¼$/è¾…ç i/
    - xform/^å…¨shUæ‹¼$/è¾…ç u/
    - xform/^å…¨([jqx])iUæ‹¼$/è¾…ç $1/
    - xform/^å…¨yuUæ‹¼$/è¾…ç a/
    - xform/^å…¨xuUæ‹¼$/è¾…ç o/
    - xform/^å…¨nvUæ‹¼$/è¾…ç e/

    - xform/^å…¨Uæ‹¼$/å…¨wuæ‹¼/

    - xform/^å…¨(.*)æ‹¼$/$1/

  # ä¸¦æ“Šå®Œæˆå¾Œå¥—ç”¨çš„å¼æ¨£
  output_format:
    # è¿½åŠ éš”éŸ³ç¬¦è™Ÿ
    - "xform/^([bpm])([iu]|a|i?e|o|[ae]i|i?ao|[oi]u|i?an|[ie]n|[ei]ng|ang|ong)$/$1$2'/"
    - "xform/^([fw])(u|a|o|[ae]i|ao|ou|an|en|eng|ang|ong)$/$1$2'/"
    - "xform/^([dt])([iu]|i?a|i?e|uo|[aeu]i|i?ao|[oi]u|[iu]?an|[ue]n|[ei]ng|ang|ong)$/$1$2'/"
    - "xform/^([nl])([iuv]|i?a|[iv]?e|u?o|[aeu]i|i?ao|[oi]u|[iu]?an|[iue]n|[ei]ng|i?ang|ong)$/$1$2'/"
    - "xform/^([gkh])(u|u?a|e|uo|u?ai|[ue]i|ao|ou|u?an|[ue]n|eng|u?ang|ong)$/$1$2'/"
    - "xform/^([zcs]h?|r)([iu]|u?a|e|uo|u?ai|[ue]i|ao|ou|u?an|[ue]n|eng|u?ang|ong)$/$1$2'/"
    - "xform/^([jqxy])([iu]|i?a|[iu]?e|o|i?ao|[oi]u|[iu]?an|[iu]n|ing|i?ang|i?ong)$/$1$2'/"
    - "xform/^([aeo]|[ae]i|ao|ou|[ae]ng?|er)$/$1'/"
    # æ¶ˆé™¤ä¸æ§‹æˆåˆæ³•éŸ³ç¯€çš„ä¸¦æ“Šçµ„åˆ
    - "erase/^([A-Za-z]+)$/"

    - 'xform/âŒ«/{BackSpace}/'
    - 'xform/â¬š/ /'
    - 'xform/^è¾…ç ([a-z])$/;$1/'
  # ä¸¦æ“Šéç¨‹ä¸­å¥—ç”¨çš„å¼æ¨£
  prompt_format:
    # åŠ æ–¹æ‹¬å¼§
    - 'xform/^(.*)$/[$1]/'
    - 'xform/^\[è¾…ç (.*)\]$/è¾… [$1]/'
    - 'xform/^\[(âŒ«|âŒ¦|â‡¥|â†µ|â‹)\]$/$1/'

editor:
  bindings:
    BackSpace: back_syllable_delimited

# æ‹¼å†™è®¾å®š
speller:
  # å¦‚æœä¸æƒ³è®©ä»€ä¹ˆæ ‡ç‚¹ç›´æ¥ä¸Šå±ï¼Œå¯ä»¥åŠ åœ¨ alphabetï¼Œæˆ–è€…ç¼–è¾‘æ ‡ç‚¹ç¬¦å·ä¸ºä¸¤ä¸ªåŠä»¥ä¸Šçš„æ˜ å°„
  alphabet: "zyxwvutsrqponmlkjihgfedcba';"
  initials: zyxwvutsrqponmlkjihgfedcba
  delimiter: " "
  syllable_begin: ";"
  syllable_end: "'"
  algebra:
    ### v u è½¬æ¢
    # é›¾å‡‡çš„è¯åº“ä¸¥æ ¼æŒ‰ç…§æ­£ç¡®çš„ u v(Ã¼) æ³¨éŸ³çš„ï¼Œæ”¯æŒä½¿ç”¨ qu/qv nue/nve æ¥è¾“å…¥ qu nve
    - derive/^([nl])ve$/$1ue/
    - derive/^([jqxy])u/$1v/
    # ä»¥é˜²å¼•å…¥çš„å…¶ä»–è¯åº“æ²¡æŒ‰ç…§æ­£ç¡®æ–¹å¼æ³¨éŸ³ï¼Œä¹Ÿåšä¸€ä¸ªè½¬æ¢
    - derive/^([nl])ue$/$1ve/
    - derive/^([jqxy])v/$1u/
    # æ‹¼éŸ³éŸ³ç¯€ä¸€å¾‹å¾ŒåŠ éš”éŸ³ç¬¦è™Ÿï¼Œé¿å…éŸ³ç¯€åˆ‡åˆ†æ­§ç¾©
    - "xform/^([a-z]+)$/$1'/"


# ä¸»ç¿»è¯‘å™¨ï¼Œæ‹¼éŸ³
translator:
  dictionary: rime_frost      # æŒ‚è½½è¯åº“ rime_frost.dict.yaml
  prism: 10d_frost
  initial_quality: 1.2        # æ‹¼éŸ³çš„æƒé‡åº”è¯¥æ¯”è‹±æ–‡å¤§
  preedit_format:             # preedit_format å½±å“åˆ°è¾“å…¥æ¡†çš„æ˜¾ç¤ºå’Œâ€œShift+å›è½¦â€ä¸Šå±çš„å­—ç¬¦
    - xform/([jqxy])v/$1u/    # æ˜¾ç¤ºä¸º ju qu xu yu
    - xform/([nl])v/$1Ã¼/      # æ˜¾ç¤ºä¸º nÃ¼ lÃ¼
    - xform/([nl])ue/$1Ã¼e/    # æ˜¾ç¤ºä¸º nÃ¼e lÃ¼e
    # - xform/([nl])v/$1v/      # æ˜¾ç¤ºä¸º nv lv
    # - xform/([nl])ue/$1ve/    # æ˜¾ç¤ºä¸º nve lve
    - "xform/' / /"
    - "xform/'$//"


# è‡ªå®šä¹‰çŸ­è¯­ï¼šcustom_phrase.txt
custom_phrase:
  dictionary: ""
  user_dict: custom_phrase  # å¯ä»¥ä¿®æ”¹è¿™é‡Œï¼Œæ”¹æˆè‡ªå·±çš„ txt æ–‡ä»¶
  db_class: stabledb        # åªè¯»æ•°æ®åº“ï¼Œæ— æ³•åŠ¨æ€è°ƒé¢‘ï¼›è®¾ä¸º tabledb å¯ä»¥åŠ¨æ€è°ƒé¢‘
  enable_completion: false  # è¡¥å…¨æç¤º
  enable_sentence: false    # ç¦æ­¢é€ å¥
  initial_quality: 99       # custom_phrase çš„æƒé‡åº”è¯¥æ¯” pinyin å’Œ melt_eng å¤§


# ç®€ç¹åˆ‡æ¢
traditionalize:
  option_name: traditionalization
  opencc_config: s2t.json  # s2t.json | s2hk.json | s2tw.json | s2twp.json
  tips: none               # è½¬æ¢æç¤º: all éƒ½æ˜¾ç¤º | char ä»…å•å­—æ˜¾ç¤º | none ä¸æ˜¾ç¤ºã€‚
  tags: [ abc, number, gregorian_to_lunar ]  # é™åˆ¶åœ¨å¯¹åº” tagï¼Œä¸å¯¹å…¶ä»–å¦‚åæŸ¥çš„å†…å®¹åšç®€ç¹è½¬æ¢


# æ ‡ç‚¹ç¬¦å·
# punctuator ä¸‹é¢æœ‰ä¸‰ä¸ªå­é¡¹ï¼š
#   full_shape å…¨è§’æ ‡ç‚¹æ˜ å°„
#   half_shape åŠè§’æ ‡ç‚¹æ˜ å°„
#   symbols    Rime çš„é¢„è®¾é…ç½®æ˜¯ä»¥ '/' å‰ç¼€å¼€å¤´è¾“å‡ºä¸€ç³»åˆ—å­—ç¬¦ï¼Œè‡ªå®šä¹‰çš„ symbols_v.yaml ä¿®æ”¹æˆäº† 'v' å¼€å¤´ã€‚
punctuator:
  full_shape:
    __include: default:/punctuator/full_shape  # ä» default.yaml å¯¼å…¥é…ç½®
  half_shape:
    __include: default:/punctuator/half_shape  # ä» default.yaml å¯¼å…¥é…ç½®
  symbols:
    __include: symbols_v:/symbols              # ä» symbols_v.yaml å¯¼å…¥é…ç½®


# å¤„ç†ç¬¦åˆç‰¹å®šè§„åˆ™çš„è¾“å…¥ç ï¼Œå¦‚ç½‘å€ã€åæŸ¥
recognizer:
  import_preset: default  # ä» default.yaml ç»§æ‰¿é€šç”¨çš„
  patterns:  # å†å¢åŠ æ–¹æ¡ˆä¸“æœ‰çš„ï¼š
    punct: "^v([0-9]|10|[A-Za-z]+)$"    # å“åº” symbols_v.yaml çš„ symbolsï¼Œç”¨ 'v' æ›¿æ¢ '/'


# ä» default ç»§æ‰¿å¿«æ·é”®
key_binder:
  import_preset: default
  bindings:
    - {accept: Tab, send_sequence: "{End};", when: composing}
  select_first_character: 'm'
  select_last_character: '/'


aux_code:
  # ignore_prefixes: # å¯¹åº” /recognizer/patterns
  #   - "V" # symbols
  #   - "uU" # éƒ¨ä»¶æ‹†å­—
  #   - "U" # Unicode
  #   - "R" # æ•°å­—é‡‘é¢
  #   - "N" # å†œå†
  ignore_regex: "^(V|uU|U|R|N)"
  show_auxcode_hint: option
  nonmatch_policy: option
  filter_mode: option

